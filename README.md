![](https://i.imgur.com/ToguFkQ.png "Banner")
# LuckPermsWeb
[![Netlify Status](https://api.netlify.com/api/v1/badges/1858b23b-5dcb-49e3-ad54-45ca005de4e0/deploy-status)](https://app.netlify.com/sites/luckpermseditor/deploys)
[![Discord](https://img.shields.io/discord/241667244927483904.svg?logo=discord&label=)](https://discord.gg/luckperms)

[LuckPerms](https://github.com/lucko/LuckPerms) is a permission plugin for Minecraft servers, written in Java.

LuckPermsWeb (this repository) contains the website for the project and a number of web apps which supplement the plugin, all written in HTML/JavaScript using the [Vue](https://vuejs.org/) framework.

### Branches

* Development takes place on the `master` branch.
* The production site at [luckperms.net](https://luckperms.net/) is automatically built from the `production` branch.
* An older (pre Vue rewrite) version of the site is on the `v1` branch.

## Setup

### Automatic setup
The automatic setup is fairly straight forward.

#### Installation
Just run those commands as a user that has `sudo` permissions:

```sh
git clone --recusrive https://github.com/lucko/LuckPermsWeb.git
LuckPermsWeb/installer/install.sh
```

Answer the questions and it will install all missing prerequisites and the editor itself.

#### Update
Just update the repo and run the install script again:

```sh
cd LuckPermsWeb
git reset --hard
git pull
installer/install.sh
```

#### Uninstallation
Run this command:

```sh
LuckPermsWeb/installer/uninstall.sh
```

#### Caveats
There are a few things to watch out for:

- This is designed to use [nginx](https://www.nginx.com/) or [Apache](https://www.apache.org/) as the webserver.
- The script will need a dedicated (sub)domain to install LuckPermsWeb to. If you want to install it in a subdir, the script will not work and you have to set
  it up yourself.
- Automatic package installation only works on Debian-based distros, as `apt-get` is used to install the missing prerequisites. If you're not on Debian-based
  distro, be sure to have these commands available, then it'll work too:
  - `java` (needed for bytebin)
  - `jq`
  - `nc`
  - `nginx` or `apache2`
  - `netstat`
  - `sed`
  - `wget`
  - `certbot` (only if you want to use HTTPS and want the certificate to be generated by Let's Encrypt)
- The bytebin will be setup using a systemd config. If you are not running on a system that uses systemd, the script will not work and you have to set it up
  yourself.

### Manual setup
Setting up the project manually is simple, you will need some basic knowledge in running a webserver, however. Nginx and Apache are both supported. You also need NodeJS and NPM installed on your system.

#### Clone and install the app
Because this repository contains a submodule repository (the LuckPerms wiki) you will want to clone it using the following command:
```sh
git clone --recursive https://github.com/lucko/LuckPermsWeb.git
```

Once it is cloned, move into the new directory and install the dependencies:
```sh
cd LuckPermsWeb
npm install
```

#### Compile and setup hot-reloads for development
If you are wanting to make changes to the app, you can run a local copy with the following command.
```sh
npm run serve
```
This will automatically open a new tab in your default browser with the app running on a local server. When you make changes to the files, the app will "hot-reload" with the new updates.

#### Compile and minify for production
If you want to build the project to a folder that can be access via a webserver, running this command will build the project in the `/dist` folder:
```sh
npm run build
```

#### Important things to know if you are self-hosting
Due to the nature of Vue and how it handles all of the page routing, there are a few things you may need to be aware of:
- The easiest way to host the app is directly under a domain or sub-domain, this requires no extra configuration steps.
- If you do require the app to be hosted under a directory (e.g. `domain.com/luckperms/<here>`) then you will need to edit the `base` property in [config.json](https://github.com/lucko/LuckPermsWeb/edit/master/config.json) to match the directory (e.g. change `'/'` to `'luckperms'`), then run the build command.
- You will also need to setup your webserver correctly to redirect any of the pages to the single `index.html` file that is generated under the `/dist` folder - [some example configrations can be found here](https://router.vuejs.org/guide/essentials/history-mode.html#example-server-configurations).
- You can simplify the app and remove certain pages like the downloads and wiki pages by setting `selfHosted` to `true` in config.json. This will also hide the sponsor message in the navigation bar.
